<div th:fragment="header" xmlns:th="http://www.thymeleaf.org">
  <div class="fly-header layui-bg-black">
    <div class="layui-container">
      <a class="fly-logo" th:href="@{/}">
        <img th:src="@{/images/logo.png}" alt="茶江传习">
      </a>
      <ul class="layui-nav fly-nav layui-hide-xs">
        <li class="layui-nav-item layui-this" th:each="label:${labels}">
          <a th:href="@{'/?label=' + ${label?.id}}"><i class="iconfont icon-jiaoliu"></i><span th:text="${label?.name}"></span></a>
        </li>
      </ul>

          <ul class="layui-nav fly-nav-user" th:if="${user == null}">
            <!-- 未登入的状态 -->
            <li class="layui-nav-item">
              <a class="iconfont icon-touxiang layui-hide-xs" th:href="@{/user/login}"></a>
            </li>
            <li class="layui-nav-item">
              <a th:href="@{/user/loginPage}">登入</a>
            </li>
            <li class="layui-nav-item">
              <a th:href="@{/user/regPage}">注册</a>
            </li>
          </ul>
        <ul class="layui-nav fly-nav-user" th:if="${user != null}">
            <!-- 登入后的状态 -->
            <li class="layui-nav-item">
                <a class="fly-nav-avatar" href="javascript:;">
                    <cite class="layui-hide-xs" th:text="${user?.username}"></cite>
                    <i class="iconfont icon-renzheng layui-hide-xs" th:text="${user?.roleName}"></i>
                    <img th:src="@{${user?.portrait}}">
                </a>
                <dl class="layui-nav-child">
                    <dd><a th:href="@{/user/set}"><i class="layui-icon">&#xe620;</i>基本设置</a></dd>
                    <dd><a th:href="@{/user/message}"><i class="iconfont icon-tongzhi" style="top: 4px;"></i>我的消息</a></dd>
                    <dd><a th:href="@{/user/home}"><i class="layui-icon" style="margin-left: 2px; font-size: 22px;">&#xe68e;</i>我的主页</a></dd>
                    <hr style="margin: 5px 0;">
                    <dd><a th:href="@{/user/logout}" style="text-align: center;">退出</a></dd>
                </dl>
            </li>
        </ul>
    </div>
  </div>
</div>